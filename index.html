
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TherapySync - AI Therapy Companion | Mental Health Support</title>
    <meta name="description" content="Sync your mind with AI-powered therapy support. Professional mental health guidance available 24/7. Start your wellness journey with TherapySync." />
    <meta name="author" content="TherapySync" />
    <meta name="keywords" content="AI therapy, mental health, therapy companion, wellness, psychological support, TherapySync" />

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#22c55e" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="TherapySync" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Favicon -->
    <link rel="icon" href="/lovable-uploads/d0afa7e0-63e0-4951-a3b8-529fcf32b24a.png" type="image/png">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/lovable-uploads/d0afa7e0-63e0-4951-a3b8-529fcf32b24a.png" />
    
    <!-- Open Graph -->
    <meta property="og:title" content="TherapySync - AI Therapy Companion" />
    <meta property="og:description" content="Sync your mind with AI-powered therapy support. Professional mental health guidance available 24/7." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://therapysync.ai" />
    <meta property="og:image" content="https://therapysync.ai/lovable-uploads/d0afa7e0-63e0-4951-a3b8-529fcf32b24a.png" />
    <meta property="og:site_name" content="TherapySync" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@therapysync" />
    <meta name="twitter:title" content="TherapySync - AI Therapy Companion" />
    <meta name="twitter:description" content="Sync your mind with AI-powered therapy support. Professional mental health guidance available 24/7." />
    <meta name="twitter:image" content="https://therapysync.ai/lovable-uploads/d0afa7e0-63e0-4951-a3b8-529fcf32b24a.png" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://therapysync.ai" />
    
    <!-- Bulletproof Lovable Tagger Pre-initialization (CRITICAL: Must load before any JS) -->
    <script>
      // PHASE 1: Ultra-bulletproof window.lov initialization
      (function() {
        'use strict';
        
        if (typeof window !== 'undefined') {
          // Create comprehensive lov object with all known requirements
          const lovObj = {
            // Core properties
            tagger: {},
            config: {},
            utils: {},
            initialized: true,
            preInitialized: true,
            timestamp: Date.now(),
            version: '2.0.0-bulletproof',
            
            // Essential methods that lovable-tagger might call
            reduce: function(arr, fn, initial) {
              try {
                return Array.isArray(arr) ? arr.reduce(fn, initial) : initial;
              } catch (e) {
                console.warn('lov.reduce fallback triggered:', e);
                return initial;
              }
            },
            
            // Safe execution wrapper
            safe: function(fn, fallback) {
              try { 
                return fn(); 
              } catch (e) { 
                console.warn('lov.safe fallback triggered:', e);
                return fallback;
              }
            },
            
            // Component registration (commonly accessed by lovable-tagger)
            components: new Map(),
            
            // Event system for component lifecycle
            events: {
              emit: function(event, data) {
                try {
                  window.dispatchEvent(new CustomEvent(`lov:${event}`, { detail: data }));
                } catch (e) {
                  console.warn('lov.events.emit fallback:', e);
                }
              },
              on: function(event, handler) {
                try {
                  window.addEventListener(`lov:${event}`, handler);
                } catch (e) {
                  console.warn('lov.events.on fallback:', e);
                }
              }
            },
            
            // Error recovery
            recover: function() {
              console.log('ðŸ”§ Lovable-tagger recovery triggered');
              return true;
            }
          };
          
          // Create non-enumerable, configurable property
          Object.defineProperty(window, 'lov', {
            value: lovObj,
            writable: true,
            configurable: true,
            enumerable: false
          });
          
          // Additional safety: ensure window.lov survives any potential overwrites
          let lovBackup = lovObj;
          Object.defineProperty(window, '__lovBackup', {
            value: lovBackup,
            writable: false,
            configurable: false,
            enumerable: false
          });
          
          // Monitor for any potential window.lov corruption
          let checkInterval = setInterval(() => {
            if (!window.lov || typeof window.lov !== 'object') {
              console.warn('ðŸš¨ window.lov corrupted, restoring from backup');
              window.lov = window.__lovBackup;
            }
          }, 100);
          
          // Clean up the monitor after 5 seconds (enough time for app to load)
          setTimeout(() => {
            clearInterval(checkInterval);
            console.log('âœ… Lovable-tagger monitoring complete');
          }, 5000);
          
          console.log('ðŸ”§ Bulletproof lovable-tagger pre-initialized successfully');
        }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
